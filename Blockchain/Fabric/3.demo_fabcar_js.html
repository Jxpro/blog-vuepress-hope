<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://blog.xin127.me/Blockchain/Fabric/3.demo_fabcar_js.html"><meta property="og:site_name" content="Joker Xin's Blog"><meta property="og:title" content="Fabric 案例 - Fabcar"><meta property="og:description" content="本文通过Fabcar案例介绍了Fabric开发的基础知识，学习如何运行fabcar网络，接着学习登记用户、查询账本、更新账本等。"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Joker Xin"><meta property="article:tag" content="Blockchain"><meta property="article:tag" content="Fabric"><meta property="article:published_time" content="2021-11-08T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Fabric 案例 - Fabcar","image":[""],"datePublished":"2021-11-08T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Joker Xin","url":"https://blog.xin127.me"}]}</script><title>Fabric 案例 - Fabcar | Joker Xin's Blog</title><meta name="description" content="本文通过Fabcar案例介绍了Fabric开发的基础知识，学习如何运行fabcar网络，接着学习登记用户、查询账本、更新账本等。">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-e5d6c9c9.css" as="style"><link rel="stylesheet" href="/assets/style-e5d6c9c9.css">
    <link rel="modulepreload" href="/assets/app-24ed71cb.js"><link rel="modulepreload" href="/assets/3.demo_fabcar_js.html-5e69b664.js"><link rel="modulepreload" href="/assets/3.demo_fabcar_js.html-c1ba9c77.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-7ce280bc.js" as="script"><link rel="prefetch" href="/assets/turing_complete.html-a47aecf8.js" as="script"><link rel="prefetch" href="/assets/script.html-9f158dd1.js" as="script"><link rel="prefetch" href="/assets/1.introduction.html-e80192ba.js" as="script"><link rel="prefetch" href="/assets/2.geth_setup.html-d08552da.js" as="script"><link rel="prefetch" href="/assets/3.account.html-f9f5c0b5.js" as="script"><link rel="prefetch" href="/assets/4.transaction.html-ab5c50d6.js" as="script"><link rel="prefetch" href="/assets/5.EVM.html-5db3bb76.js" as="script"><link rel="prefetch" href="/assets/1.env_setup_2.3.html-d61ae5a6.js" as="script"><link rel="prefetch" href="/assets/2.demo_test_network.html-92e7c977.js" as="script"><link rel="prefetch" href="/assets/4.demo_paper.html-dce43d8c.js" as="script"><link rel="prefetch" href="/assets/5.analysis_paper_1.html-d257be49.js" as="script"><link rel="prefetch" href="/assets/6.analysis_paper_2.html-83f2ad7c.js" as="script"><link rel="prefetch" href="/assets/BT_Install.html-14df2935.js" as="script"><link rel="prefetch" href="/assets/add_port.html-ef5061d9.js" as="script"><link rel="prefetch" href="/assets/command.html-237752b2.js" as="script"><link rel="prefetch" href="/assets/setup.html-1b6efc13.js" as="script"><link rel="prefetch" href="/assets/proxy.html-513d1e78.js" as="script"><link rel="prefetch" href="/assets/readme_stats.html-24128c96.js" as="script"><link rel="prefetch" href="/assets/key.html-62f66419.js" as="script"><link rel="prefetch" href="/assets/picgo_gitee.html-4472f192.js" as="script"><link rel="prefetch" href="/assets/typora_crack.html-0d6ff2b1.js" as="script"><link rel="prefetch" href="/assets/anaconda_install.html-31e48831.js" as="script"><link rel="prefetch" href="/assets/conda.html-bb01b70e.js" as="script"><link rel="prefetch" href="/assets/phantomjs_sub.html-5a28ee1f.js" as="script"><link rel="prefetch" href="/assets/pip.html-2889c96d.js" as="script"><link rel="prefetch" href="/assets/pretty_errors.html-f2150944.js" as="script"><link rel="prefetch" href="/assets/pyinstaller.html-b25fbdaa.js" as="script"><link rel="prefetch" href="/assets/xywlogin.html-a078b581.js" as="script"><link rel="prefetch" href="/assets/FTP_configure.html-1357458f.js" as="script"><link rel="prefetch" href="/assets/ROS.html-4bae73b1.js" as="script"><link rel="prefetch" href="/assets/SMBus_controller.html-4864eed8.js" as="script"><link rel="prefetch" href="/assets/architecture.html-ed2b0b3f.js" as="script"><link rel="prefetch" href="/assets/command.html-b57d11ec.js" as="script"><link rel="prefetch" href="/assets/profile_bashrc.html-3cf07922.js" as="script"><link rel="prefetch" href="/assets/vim.html-4f9ab54b.js" as="script"><link rel="prefetch" href="/assets/yum.html-d87ec7c3.js" as="script"><link rel="prefetch" href="/assets/alfred.html-3c1cb318.js" as="script"><link rel="prefetch" href="/assets/initial_config.html-a5812300.js" as="script"><link rel="prefetch" href="/assets/iterm2_ssh.html-133d4617.js" as="script"><link rel="prefetch" href="/assets/404.html-4729c892.js" as="script"><link rel="prefetch" href="/assets/index.html-5ee78ecb.js" as="script"><link rel="prefetch" href="/assets/index.html-78776104.js" as="script"><link rel="prefetch" href="/assets/index.html-b6b75645.js" as="script"><link rel="prefetch" href="/assets/index.html-c3f05556.js" as="script"><link rel="prefetch" href="/assets/index.html-c8408967.js" as="script"><link rel="prefetch" href="/assets/index.html-35042f30.js" as="script"><link rel="prefetch" href="/assets/index.html-9b5d6776.js" as="script"><link rel="prefetch" href="/assets/index.html-e4385197.js" as="script"><link rel="prefetch" href="/assets/index.html-44eca6b3.js" as="script"><link rel="prefetch" href="/assets/index.html-d3297a9d.js" as="script"><link rel="prefetch" href="/assets/index.html-66d0d4c3.js" as="script"><link rel="prefetch" href="/assets/index.html-e7c17dfd.js" as="script"><link rel="prefetch" href="/assets/index.html-57863ddd.js" as="script"><link rel="prefetch" href="/assets/index.html-7c25d4e3.js" as="script"><link rel="prefetch" href="/assets/index.html-4cdc4992.js" as="script"><link rel="prefetch" href="/assets/index.html-40db4a0e.js" as="script"><link rel="prefetch" href="/assets/index.html-9c4b72b4.js" as="script"><link rel="prefetch" href="/assets/index.html-3e7b5d9d.js" as="script"><link rel="prefetch" href="/assets/index.html-36397e23.js" as="script"><link rel="prefetch" href="/assets/index.html-5bf42f2e.js" as="script"><link rel="prefetch" href="/assets/index.html-eb794855.js" as="script"><link rel="prefetch" href="/assets/index.html-ddf57fa3.js" as="script"><link rel="prefetch" href="/assets/index.html-499b24b8.js" as="script"><link rel="prefetch" href="/assets/index.html-d14b58c7.js" as="script"><link rel="prefetch" href="/assets/index.html-9b50880f.js" as="script"><link rel="prefetch" href="/assets/index.html-1bce93ab.js" as="script"><link rel="prefetch" href="/assets/index.html-4d81ef3e.js" as="script"><link rel="prefetch" href="/assets/index.html-c6c77b34.js" as="script"><link rel="prefetch" href="/assets/index.html-3b3001f3.js" as="script"><link rel="prefetch" href="/assets/index.html-77164358.js" as="script"><link rel="prefetch" href="/assets/index.html-0e6593b7.js" as="script"><link rel="prefetch" href="/assets/index.html-e083d6cd.js" as="script"><link rel="prefetch" href="/assets/index.html-cc1468b0.js" as="script"><link rel="prefetch" href="/assets/index.html-6e89bd30.js" as="script"><link rel="prefetch" href="/assets/index.html-8f8ceb5c.js" as="script"><link rel="prefetch" href="/assets/index.html-5ddbb37d.js" as="script"><link rel="prefetch" href="/assets/index.html-e2278d63.js" as="script"><link rel="prefetch" href="/assets/index.html-dabaf3f3.js" as="script"><link rel="prefetch" href="/assets/index.html-8bfffb19.js" as="script"><link rel="prefetch" href="/assets/index.html-eec6276f.js" as="script"><link rel="prefetch" href="/assets/turing_complete.html-a5c380c4.js" as="script"><link rel="prefetch" href="/assets/script.html-c9b25e7b.js" as="script"><link rel="prefetch" href="/assets/1.introduction.html-b4ce1a65.js" as="script"><link rel="prefetch" href="/assets/2.geth_setup.html-f8dd14d7.js" as="script"><link rel="prefetch" href="/assets/3.account.html-ec1d96ea.js" as="script"><link rel="prefetch" href="/assets/4.transaction.html-730c0a8d.js" as="script"><link rel="prefetch" href="/assets/5.EVM.html-2319afb7.js" as="script"><link rel="prefetch" href="/assets/1.env_setup_2.3.html-c2c70bcc.js" as="script"><link rel="prefetch" href="/assets/2.demo_test_network.html-67738352.js" as="script"><link rel="prefetch" href="/assets/4.demo_paper.html-2ec2fe8a.js" as="script"><link rel="prefetch" href="/assets/5.analysis_paper_1.html-beec2377.js" as="script"><link rel="prefetch" href="/assets/6.analysis_paper_2.html-a795e946.js" as="script"><link rel="prefetch" href="/assets/BT_Install.html-32944e84.js" as="script"><link rel="prefetch" href="/assets/add_port.html-1b451888.js" as="script"><link rel="prefetch" href="/assets/command.html-3f14c257.js" as="script"><link rel="prefetch" href="/assets/setup.html-a7e07bea.js" as="script"><link rel="prefetch" href="/assets/proxy.html-c4cacd30.js" as="script"><link rel="prefetch" href="/assets/readme_stats.html-51e28509.js" as="script"><link rel="prefetch" href="/assets/key.html-c5ffd1e5.js" as="script"><link rel="prefetch" href="/assets/picgo_gitee.html-2d4d7efd.js" as="script"><link rel="prefetch" href="/assets/typora_crack.html-b8fee130.js" as="script"><link rel="prefetch" href="/assets/anaconda_install.html-0306735f.js" as="script"><link rel="prefetch" href="/assets/conda.html-80366430.js" as="script"><link rel="prefetch" href="/assets/phantomjs_sub.html-a1a09e2c.js" as="script"><link rel="prefetch" href="/assets/pip.html-164a0196.js" as="script"><link rel="prefetch" href="/assets/pretty_errors.html-7215cfb4.js" as="script"><link rel="prefetch" href="/assets/pyinstaller.html-8bea0957.js" as="script"><link rel="prefetch" href="/assets/xywlogin.html-115beed0.js" as="script"><link rel="prefetch" href="/assets/FTP_configure.html-5b5ef400.js" as="script"><link rel="prefetch" href="/assets/ROS.html-41cfa75c.js" as="script"><link rel="prefetch" href="/assets/SMBus_controller.html-cdc79311.js" as="script"><link rel="prefetch" href="/assets/architecture.html-050c0f8a.js" as="script"><link rel="prefetch" href="/assets/command.html-6985033a.js" as="script"><link rel="prefetch" href="/assets/profile_bashrc.html-7477f07b.js" as="script"><link rel="prefetch" href="/assets/vim.html-f26d69e1.js" as="script"><link rel="prefetch" href="/assets/yum.html-12d9efc1.js" as="script"><link rel="prefetch" href="/assets/alfred.html-af745a09.js" as="script"><link rel="prefetch" href="/assets/initial_config.html-e5b9ba0b.js" as="script"><link rel="prefetch" href="/assets/iterm2_ssh.html-ea3125a0.js" as="script"><link rel="prefetch" href="/assets/404.html-494dd4ef.js" as="script"><link rel="prefetch" href="/assets/index.html-6011f1a5.js" as="script"><link rel="prefetch" href="/assets/index.html-448e81b0.js" as="script"><link rel="prefetch" href="/assets/index.html-213f0c66.js" as="script"><link rel="prefetch" href="/assets/index.html-0e51eaf4.js" as="script"><link rel="prefetch" href="/assets/index.html-8fe6c5d2.js" as="script"><link rel="prefetch" href="/assets/index.html-507ccffb.js" as="script"><link rel="prefetch" href="/assets/index.html-5db75b53.js" as="script"><link rel="prefetch" href="/assets/index.html-dc56237a.js" as="script"><link rel="prefetch" href="/assets/index.html-d75f8dea.js" as="script"><link rel="prefetch" href="/assets/index.html-8049ce3b.js" as="script"><link rel="prefetch" href="/assets/index.html-00cfc705.js" as="script"><link rel="prefetch" href="/assets/index.html-a966ab6c.js" as="script"><link rel="prefetch" href="/assets/index.html-c4d690bd.js" as="script"><link rel="prefetch" href="/assets/index.html-a0512e2e.js" as="script"><link rel="prefetch" href="/assets/index.html-86e1c409.js" as="script"><link rel="prefetch" href="/assets/index.html-9060570b.js" as="script"><link rel="prefetch" href="/assets/index.html-bc7b7e77.js" as="script"><link rel="prefetch" href="/assets/index.html-ef0db4e7.js" as="script"><link rel="prefetch" href="/assets/index.html-5fcebed9.js" as="script"><link rel="prefetch" href="/assets/index.html-4f372593.js" as="script"><link rel="prefetch" href="/assets/index.html-a3d7b3d7.js" as="script"><link rel="prefetch" href="/assets/index.html-73f640d4.js" as="script"><link rel="prefetch" href="/assets/index.html-8587171b.js" as="script"><link rel="prefetch" href="/assets/index.html-893c105a.js" as="script"><link rel="prefetch" href="/assets/index.html-dd0b0064.js" as="script"><link rel="prefetch" href="/assets/index.html-eb8d402e.js" as="script"><link rel="prefetch" href="/assets/index.html-31723b15.js" as="script"><link rel="prefetch" href="/assets/index.html-6560ba18.js" as="script"><link rel="prefetch" href="/assets/index.html-3ffb4c95.js" as="script"><link rel="prefetch" href="/assets/index.html-39900330.js" as="script"><link rel="prefetch" href="/assets/index.html-569cb119.js" as="script"><link rel="prefetch" href="/assets/index.html-c0bc6c37.js" as="script"><link rel="prefetch" href="/assets/index.html-83891194.js" as="script"><link rel="prefetch" href="/assets/index.html-9ab6703c.js" as="script"><link rel="prefetch" href="/assets/index.html-586b6f6f.js" as="script"><link rel="prefetch" href="/assets/index.html-09f89237.js" as="script"><link rel="prefetch" href="/assets/index.html-0b3f0058.js" as="script"><link rel="prefetch" href="/assets/index.html-f645fc3e.js" as="script"><link rel="prefetch" href="/assets/index.html-3a01d287.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-37020879.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-4415320d.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-2450701e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="vp-brand"><img class="vp-nav-logo" src="/logo.svg" alt="Joker Xin&#39;s Blog"><!----><span class="vp-site-name hide-in-pad">Joker Xin&#39;s Blog</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="开发"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>开发</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Development/Python/" class="nav-link" aria-label="Python"><span class="font-icon icon iconfont icon-edit" style=""></span>Python<!----></a></li><li class="dropdown-item"><a href="/Development/Markdown/" class="nav-link" aria-label="Markdown"><span class="font-icon icon iconfont icon-edit" style=""></span>Markdown<!----></a></li><li class="dropdown-item"><a href="/Development/Docker/" class="nav-link" aria-label="Docker"><span class="font-icon icon iconfont icon-edit" style=""></span>Docker<!----></a></li><li class="dropdown-item"><a href="/Development/Git/" class="nav-link" aria-label="Git"><span class="font-icon icon iconfont icon-edit" style=""></span>Git<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="系统"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>系统</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/System/Linux/" class="nav-link" aria-label="Linux"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux<!----></a></li><li class="dropdown-item"><a href="/System/MacOS/" class="nav-link" aria-label="MacOS"><span class="font-icon icon iconfont icon-edit" style=""></span>MacOS<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="区块链"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>区块链</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Blockchain/Bitcoin/" class="nav-link" aria-label="比特币"><span class="font-icon icon iconfont icon-edit" style=""></span>比特币<!----></a></li><li class="dropdown-item"><a href="/Blockchain/Ethereum/" class="nav-link" aria-label="以太坊"><span class="font-icon icon iconfont icon-edit" style=""></span>以太坊<!----></a></li><li class="dropdown-item"><a href="/Blockchain/Fabric/" class="nav-link active" aria-label="超级账本"><span class="font-icon icon iconfont icon-edit" style=""></span>超级账本<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a href="/Blockchain/turing_complete.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="图灵完备"><!---->图灵完备<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-creative" style=""></span><a href="/Blockchain/Bitcoin/" class="nav-link vp-sidebar-title" aria-label="比特币"><!---->比特币<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a href="/Blockchain/Bitcoin/script.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="脚本和交易模型"><!---->脚本和交易模型<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable"><span class="font-icon icon iconfont icon-creative" style=""></span><a href="/Blockchain/Ethereum/" class="nav-link vp-sidebar-title" aria-label="以太坊"><!---->以太坊<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a href="/Blockchain/Ethereum/1.introduction.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="基本介绍"><!---->基本介绍<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Ethereum/2.geth_setup.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="私链部署"><!---->私链部署<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Ethereum/3.account.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="账户类型"><!---->账户类型<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Ethereum/4.transaction.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="交易模型"><!---->交易模型<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Ethereum/5.EVM.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="以太坊虚拟机"><!---->以太坊虚拟机<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading clickable active"><span class="font-icon icon iconfont icon-creative" style=""></span><a href="/Blockchain/Fabric/" class="nav-link active vp-sidebar-title" aria-label="超极账本"><!---->超极账本<!----></a><!----></p><ul class="vp-sidebar-links"><li><!--[--><a href="/Blockchain/Fabric/1.env_setup_2.3.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="环境搭建"><!---->环境搭建<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Fabric/2.demo_test_network.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="测试网络"><!---->测试网络<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html" class="router-link-active router-link-exact-active nav-link active vp-sidebar-link vp-sidebar-page active" aria-label="Fabcar"><!---->Fabcar<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#一、准备工作" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="一、准备工作"><!---->一、准备工作<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#二、设置网络" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="二、设置网络"><!---->二、设置网络<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#三、安装依赖" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="三、安装依赖"><!---->三、安装依赖<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#四、登记管理员用户" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="四、登记管理员用户"><!---->四、登记管理员用户<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#五、注册和登记应用程序用户" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="五、注册和登记应用程序用户"><!---->五、注册和登记应用程序用户<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#六、查询账本" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="六、查询账本"><!---->六、查询账本<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#七、查询指定内容" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="七、查询指定内容"><!---->七、查询指定内容<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#八、更新账本-添加数据" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="八、更新账本-添加数据"><!---->八、更新账本-添加数据<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#九、更新账本-修改数据" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="九、更新账本-修改数据"><!---->九、更新账本-修改数据<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#十、清除数据" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="十、清除数据"><!---->十、清除数据<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#十一、参考文章" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="十一、参考文章"><!---->十一、参考文章<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/Blockchain/Fabric/4.demo_paper.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="商业票据"><!---->商业票据<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Fabric/5.analysis_paper_1.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="智能合约介绍"><!---->智能合约介绍<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/Blockchain/Fabric/6.analysis_paper_2.html" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="SDK调用智能合约"><!---->SDK调用智能合约<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Fabric 案例 - Fabcar</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://blog.xin127.me" target="_blank" rel="noopener noreferrer">Joker Xin</a></span><span property="author" content="Joker Xin"></span></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2021-11-08T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 13 分钟</span><meta property="timeRequired" content="PT13M"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag5 clickable" role="navigation">Blockchain</span><span class="page-tag-item tag4 clickable" role="navigation">Fabric</span><!--]--><meta property="keywords" content="Blockchain,Fabric"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#一、准备工作" class="router-link-active router-link-exact-active toc-link level2">一、准备工作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#二、设置网络" class="router-link-active router-link-exact-active toc-link level2">二、设置网络</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#三、安装依赖" class="router-link-active router-link-exact-active toc-link level2">三、安装依赖</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#四、登记管理员用户" class="router-link-active router-link-exact-active toc-link level2">四、登记管理员用户</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#五、注册和登记应用程序用户" class="router-link-active router-link-exact-active toc-link level2">五、注册和登记应用程序用户</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#六、查询账本" class="router-link-active router-link-exact-active toc-link level2">六、查询账本</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#七、查询指定内容" class="router-link-active router-link-exact-active toc-link level2">七、查询指定内容</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#八、更新账本-添加数据" class="router-link-active router-link-exact-active toc-link level2">八、更新账本-添加数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#九、更新账本-修改数据" class="router-link-active router-link-exact-active toc-link level2">九、更新账本-修改数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#十、清除数据" class="router-link-active router-link-exact-active toc-link level2">十、清除数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Blockchain/Fabric/3.demo_fabcar_js.html#十一、参考文章" class="router-link-active router-link-exact-active toc-link level2">十一、参考文章</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="fabric案例-fabcar" tabindex="-1"><a class="header-anchor" href="#fabric案例-fabcar" aria-hidden="true">#</a> Fabric案例 - fabcar</h1><p>这个教程演示了<strong>Javascript版本</strong>的 <code>FabCar</code> 智能合约和应用程序，但是 <code>fabric-samples</code> 仓库也包含 <strong>Go、Java 和 TypeScript 版本</strong>的样例。想尝试 Go、Java 或者 TypeScript 版本，只需改变 <code>./startFabric.sh</code> 的 <code>javascript</code> 参数为 <code>go</code>、 <code>java</code> 或者 <code>typescript</code>即可</p><h2 id="一、准备工作" tabindex="-1"><a class="header-anchor" href="#一、准备工作" aria-hidden="true">#</a> 一、准备工作</h2><p>Linux下需要安装 <a href="https://www.python.org/download/releases/2.7/" target="_blank" rel="noopener noreferrer">Python v2.7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，<a href="https://www.gnu.org/software/make/" target="_blank" rel="noopener noreferrer">make<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，和C/C++编译器工具链，如 <a href="https://gcc.gnu.org/" target="_blank" rel="noopener noreferrer">GCC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>可以执行如下命令安装其他工具:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> build-essential

<span class="token comment"># 查看Python版本</span>
$ python2 <span class="token parameter variable">-V</span>
Python <span class="token number">2.7</span>.17

$ python3 <span class="token parameter variable">-V</span>
Python <span class="token number">3.6</span>.7

$ python <span class="token parameter variable">-V</span>
Python <span class="token number">2.7</span>.17
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装nodejs（JavaScript编写版本）</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 下载</span>
<span class="token function">wget</span> https://npm.taobao.org/mirrors/node/latest-gallium/node-v16.13.0-linux-x64.tar.xz

<span class="token comment"># 解压，这里不用-z参数，因为不是.gz 文件</span>
<span class="token function">tar</span> <span class="token parameter variable">-C</span> /usr/local <span class="token parameter variable">-xf</span> node-v16.13.0-linux-x64.tar.xz
<span class="token builtin class-name">cd</span> /usr/local/
<span class="token function">mv</span> node-v16.13.0-linux-x64/ <span class="token function">node</span>

<span class="token comment">#加入环境变量</span>
<span class="token function">vim</span> ~/.profile
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/usr/local/node/bin
<span class="token builtin class-name">source</span> ~/.profile

<span class="token comment"># 查看安装结果</span>
$ <span class="token function">node</span> <span class="token parameter variable">-v</span>
v16.13.0
$ <span class="token function">npm</span> <span class="token parameter variable">-v</span>
<span class="token number">8.1</span>.0

<span class="token comment"># 设置npm镜像源</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmmirror.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、设置网络" tabindex="-1"><a class="header-anchor" href="#二、设置网络" aria-hidden="true">#</a> 二、设置网络</h2><p>此命令将部署<strong>两个peer节点和一个排序节点</strong>以部署Fabric测试网络。 我们将<strong>使用证书颁发机构启动测试网络</strong>，而不是使用cryptogen工具。 我们将使用这些CA的其中一个来创建证书以及一些key， 这些加密资料将在之后的步骤中被我们的应用程序使用。</p><p><code>startFabric.sh</code> 脚本还将部署和初始化在 <code>mychannel</code> 通道上的 FabCar智能合约的JavaScript版本，然后调用智能合约来把初始数据存储在帐本上。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$GOPATH</span>/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar

./startFabric.sh javascript
<span class="token comment"># startFabric.sh 部分源码</span>
<span class="token function">pushd</span> <span class="token punctuation">..</span>/test-network
./network.sh down
./network.sh up createChannel <span class="token parameter variable">-ca</span> <span class="token parameter variable">-s</span> couchdb
./network.sh deployCC <span class="token parameter variable">-ccn</span> fabcar <span class="token parameter variable">-ccv</span> <span class="token number">1</span> <span class="token parameter variable">-cci</span> initLedger <span class="token parameter variable">-ccl</span> <span class="token variable">${CC_SRC_LANGUAGE}</span> <span class="token parameter variable">-ccp</span> <span class="token variable">${CC_SRC_PATH}</span>

<span class="token comment"># 过程摘录</span>
<span class="token comment"># 停止网络</span>
Stopping network
<span class="token punctuation">..</span>.
Creating channel <span class="token string">&#39;mychannel&#39;</span><span class="token builtin class-name">.</span>
If network is not up, starting nodes with CLI <span class="token function">timeout</span> of <span class="token string">&#39;5&#39;</span> tries and CLI delay of <span class="token string">&#39;3&#39;</span> seconds and using database <span class="token string">&#39;couchdb with crypto from &#39;</span>Certificate Authorities<span class="token string">&#39;

# 启动网络
Bringing up network
LOCAL_VERSION=2.3.3
DOCKER_IMAGE_VERSION=2.3.3
CA_LOCAL_VERSION=1.5.2
CA_DOCKER_IMAGE_VERSION=1.5.2
Generating certificates using Fabric CA
Creating network &quot;fabric_test&quot; with the default driver
Creating ca_org2    ... done
Creating ca_orderer ... done
Creating ca_org1    ... done

Creating Org1 Identities
...

Creating Org2 Identities
...

Creating Orderer Org Identities
...

Generating CCP files for Org1 and Org2
...
Creating couchdb1               ... done
Creating couchdb0               ... done
Creating orderer.example.com    ... done
Creating peer0.org2.example.com ... done
Creating peer0.org1.example.com ... done
Creating cli                    ... done
...


# 建立通道
Generating channel genesis block &#39;</span>mychannel.block<span class="token string">&#39;
...
Creating channel mychannel
...
Channel &#39;</span>mychannel<span class="token string">&#39; created
...
Anchor peer set for org &#39;</span>Org1MSP<span class="token string">&#39; on channel &#39;</span>mychannel<span class="token string">&#39;
...
Anchor peer set for org &#39;</span>Org2MSP<span class="token string">&#39; on channel &#39;</span>mychannel<span class="token string">&#39;
...
Channel &#39;</span>mychannel<span class="token string">&#39; joined


# 部署链码
deploying chaincode on channel &#39;</span>mychannel<span class="token string">&#39;
executing with the following
- CHANNEL_NAME: mychannel
- CC_NAME: fabcar
- CC_SRC_PATH: ../chaincode/fabcar/javascript/
- CC_SRC_LANGUAGE: javascript
- CC_VERSION: 1
- CC_SEQUENCE: 1
- CC_END_POLICY: NA
- CC_COLL_CONFIG: NA
- CC_INIT_FCN: initLedger
- DELAY: 3
- MAX_RETRY: 5
- VERBOSE: false
+ peer lifecycle chaincode package fabcar.tar.gz --path ../chaincode/fabcar/javascript/ --lang node --label fabcar_1
+ res=0
Chaincode is packaged
...
Chaincode is installed on peer0.org1
...
Chaincode is installed on peer0.org2
...
Query installed successful on peer0.org1 on channel
...
Chaincode definition approved on peer0.org1 on channel &#39;</span>mychannel<span class="token string">&#39;
...
Chaincode definition approved on peer0.org2 on channel &#39;</span>mychannel<span class="token string">&#39;
...
Chaincode definition committed on channel &#39;</span>mychannel<span class="token string">&#39;
...
Query chaincode definition successful on peer0.org1 on channel &#39;</span>mychannel<span class="token string">&#39;
...
Query chaincode definition successful on peer0.org2 on channel &#39;</span>mychannel<span class="token string">&#39;
...
Invoke transaction successful on peer0.org1 peer0.org2 on channel &#39;</span>mychannel&#39;

<span class="token comment"># 说明</span>
Total setup execution <span class="token function">time</span> <span class="token builtin class-name">:</span> <span class="token number">344</span> secs <span class="token punctuation">..</span>.
Next, use the FabCar applications to interact with the deployed FabCar contract.
The FabCar applications are available <span class="token keyword">in</span> multiple programming languages.
Follow the instructions <span class="token keyword">for</span> the programming language of your choice:

JavaScript:
  Start by changing into the <span class="token string">&quot;javascript&quot;</span> directory:
    <span class="token builtin class-name">cd</span> javascript
  Next, <span class="token function">install</span> all required packages:
    <span class="token function">npm</span> <span class="token function">install</span>

  Then run the following applications to enroll the admin user, and register a new user
  called appUser <span class="token function">which</span> will be used by the other applications to interact with the deployed
  FabCar contract:
    <span class="token function">node</span> enrollAdmin
    <span class="token function">node</span> registerUser

  You can run the invoke application as follows. By default, the invoke application will
  create a new car, but you can update the application to submit other transactions:
    <span class="token function">node</span> invoke

  You can run the query application as follows. By default, the query application will
  <span class="token builtin class-name">return</span> all cars, but you can update the application to evaluate other transactions:
    <span class="token function">node</span> query
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、安装依赖" tabindex="-1"><a class="header-anchor" href="#三、安装依赖" aria-hidden="true">#</a> 三、安装依赖</h2><p>这个指令将安装应用程序的主要依赖，这些依赖定义在 <code>package.json</code> 中。其中最重要的是 <code>fabric-network</code> 类；它使得应用程序可以使用身份、钱包和连接到通道的网关，以及提交交易和等待通知。本教程也将使用 <code>fabric-ca-client</code> 类来注册用户以及他们的授权证书，生成一个 <code>fabric-network</code> 在后边会用到的合法身份。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> javascript
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、登记管理员用户" tabindex="-1"><a class="header-anchor" href="#四、登记管理员用户" aria-hidden="true">#</a> 四、登记管理员用户</h2><blockquote><p>下边的部分执行和证书授权服务器通讯，在运行下边的程序时，可以打开一个新终端，并运行 <code>docker logs -f ca_org1</code> 来查看 CA 的日志流，会很有帮助。</p></blockquote><p>当我们创建网络的时候，一个管理员用户（ <code>admin</code>）被证书授权服务器（<code>CA</code>）创建成了 <strong>注册员</strong> 。我们第一步要使用 <code>enroll.js</code> 程序为 <code>admin</code> 生成私钥、公钥和 x.509 证书。这个程序使用一个 <strong>证书签名请求</strong> （<code>CSR</code>）——现在本地生成公钥和私钥，然后把公钥发送到 CA ，CA 会发布会一个让应用程序使用的证书。这三个证书会保存在钱包中，以便于我们<strong>以管理员的身份使用 CA</strong>。</p><p>我们登记一个 <code>admin</code> 用户，这个命令将 CA 管理员的证书保存在 <code>wallet</code> 目录。 您可以在 <code>wallet/admin.id</code> 文件中找到管理员的证书和私钥：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> enrollAdmin.js

<span class="token comment"># 终端输出</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Successfully enrolled admin user <span class="token string">&quot;admin&quot;</span> and imported it into the wallet

<span class="token comment"># docker logs -f ca_org1 输出</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Received request <span class="token keyword">for</span> /api/v1/enroll
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> ca.Config: <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">}</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity admin
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Login user admin with max enrollments of <span class="token parameter variable">-1</span> and state of <span class="token number">1</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: identity admin successfully logged <span class="token keyword">in</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity admin
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Requested expiry <span class="token string">&#39;0001-01-01 00:00:00 +0000 UTC&#39;</span> is before the CA certificate expiry <span class="token string">&#39;2021-11-06 05:54:00 +0000 UTC&#39;</span><span class="token builtin class-name">.</span> Will use CA cert expiry
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Processing sign request: <span class="token assign-left variable">id</span><span class="token operator">=</span>admin, <span class="token assign-left variable">CommonName</span><span class="token operator">=</span>admin, <span class="token assign-left variable">Subject</span><span class="token operator">=</span><span class="token operator">&lt;</span>nil<span class="token operator">&gt;</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Request is not <span class="token keyword">for</span> a CA signing certificate
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking CSR fields to <span class="token function">make</span> sure that they <span class="token keyword">do</span> not exceed maximum character limits
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Finished processing sign request
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity admin
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> signed certificate with serial number <span class="token number">336076363807987864110041852220743842877365008258</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Insert Certificate
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Saved serial number as hex 3ade2f73c0c2404a1dce6e2e70aea765297bb782
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> saved certificate with serial number <span class="token number">336076363807987864110041852220743842877365008258</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Successfully incremented state <span class="token keyword">for</span> identity admin to <span class="token number">2</span>
<span class="token number">2021</span>/11/06 06:08:03 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token number">172.27</span>.0.1:33124 POST /api/v1/enroll <span class="token number">201</span> <span class="token number">0</span> <span class="token string">&quot;OK&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、注册和登记应用程序用户" tabindex="-1"><a class="header-anchor" href="#五、注册和登记应用程序用户" aria-hidden="true">#</a> 五、注册和登记应用程序用户</h2><p>既然我们的 <code>admin</code> 是用来与CA一起工作的。 我们也已经在钱包中有了管理员的凭据， 那么我们可以创建一个<strong>新的应用程序用户</strong>，它将被用于与区块链交互。 运行以下命令注册和记录一个名为 <code>appUser</code> 的新用户。</p><p>与admin注册类似，该程序使用<code>CSR</code>注册 <code>appUser</code> 并将其凭证与 <code>admin</code> 凭证一起存储在钱包中。 现在，我们有了两个独立用户的身份—— <code>admin</code> 和 <code>appUser</code> ——它们可以被我们的应用程序使用。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> registerUser.js

<span class="token comment"># 终端输出</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Successfully registered and enrolled admin user <span class="token string">&quot;appUser&quot;</span> and imported it into the wallet

<span class="token comment"># docker logs -f ca_org1 输出</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Received request <span class="token keyword">for</span> /api/v1/register
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Caller is using a x509 certificate
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Certicate Dates: NotAfter <span class="token operator">=</span> <span class="token number">2022</span>-11-06 06:08:00 +0000 UTC NotBefore <span class="token operator">=</span> <span class="token number">2021</span>-11-06 05:54:00 +0000 UTC
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking <span class="token keyword">for</span> revocation/expiration of certificate owned by <span class="token string">&#39;admin&#39;</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Get certificate by serial <span class="token punctuation">(</span>3ade2f73c0c2404a1dce6e2e70aea765297bb782<span class="token punctuation">)</span> and aki <span class="token punctuation">(</span>19a0bea446fbc47d4aa79ea118e98f2682c987bf<span class="token punctuation">)</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity admin
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Successful token authentication of <span class="token string">&#39;admin&#39;</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Received registration request from admin: <span class="token punctuation">{</span> Name:appUser Type:client Secret:**** MaxEnrollments:1 Affiliation:org1.department1 Attributes:<span class="token punctuation">[</span><span class="token punctuation">]</span> CAName:  <span class="token punctuation">}</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> canRegister - Check to see <span class="token keyword">if</span> user <span class="token string">&#39;admin&#39;</span> can register
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking to see <span class="token keyword">if</span> <span class="token builtin class-name">caller</span> <span class="token string">&#39;admin&#39;</span> can act on <span class="token builtin class-name">type</span> <span class="token string">&#39;client&#39;</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking to see <span class="token keyword">if</span> <span class="token builtin class-name">caller</span> <span class="token string">&#39;admin&#39;</span> is a registrar
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Validating affiliation: org1.department1
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking to see <span class="token keyword">if</span> affiliation <span class="token string">&#39;org1.department1&#39;</span> contains <span class="token builtin class-name">caller</span><span class="token string">&#39;s affiliation &#39;</span>&#39;
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Caller has root affiliation
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Get affiliation org1.department1
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Registering user id: appUser
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Max enrollment value verification - User specified max enrollment: <span class="token number">1</span>, CA max enrollment: <span class="token parameter variable">-1</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity appUser
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Add identity appUser
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Successfully added identity appUser to the database
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token number">172.27</span>.0.1:33160 POST /api/v1/register <span class="token number">201</span> <span class="token number">0</span> <span class="token string">&quot;OK&quot;</span>

<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Received request <span class="token keyword">for</span> /api/v1/enroll
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> ca.Config: <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">}</span>
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity appUser
<span class="token number">2021</span>/11/06 06:10:45 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Login user appUser with max enrollments of <span class="token number">1</span> and state of <span class="token number">0</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: identity appUser successfully logged <span class="token keyword">in</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity appUser
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Requested expiry <span class="token string">&#39;0001-01-01 00:00:00 +0000 UTC&#39;</span> is before the CA certificate expiry <span class="token string">&#39;2021-11-06 05:54:00 +0000 UTC&#39;</span><span class="token builtin class-name">.</span> Will use CA cert expiry
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Processing sign request: <span class="token assign-left variable">id</span><span class="token operator">=</span>appUser, <span class="token assign-left variable">CommonName</span><span class="token operator">=</span>appUser, <span class="token assign-left variable">Subject</span><span class="token operator">=</span><span class="token operator">&lt;</span>nil<span class="token operator">&gt;</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Request is not <span class="token keyword">for</span> a CA signing certificate
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Checking CSR fields to <span class="token function">make</span> sure that they <span class="token keyword">do</span> not exceed maximum character limits
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Finished processing sign request
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Getting identity appUser
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Attribute extension being added to certificate is: <span class="token operator">&amp;</span><span class="token punctuation">{</span>ID:<span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">1</span><span class="token punctuation">]</span> Critical:false Value:7b226174747273223a7b2268662e416666696c696174696f6e223a226f7267312e6465706172746d656e7431222c2268662e456e726f6c6c6d656e744944223a2261707055736572222c2268662e54797065223a22636c69656e74227d7d<span class="token punctuation">}</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Adding attribute extension to CSR: <span class="token operator">&amp;</span><span class="token punctuation">{</span>ID:<span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">1</span><span class="token punctuation">]</span> Critical:false Value:7b226174747273223a7b2268662e416666696c696174696f6e223a226f7267312e6465706172746d656e7431222c2268662e456e726f6c6c6d656e744944223a2261707055736572222c2268662e54797065223a22636c69656e74227d7d<span class="token punctuation">}</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> signed certificate with serial number <span class="token number">408002549846028683500546520131538177228654950487</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> DB: Insert Certificate
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Saved serial number as hex 4777779329a93ea1385ba46423a3a368ab5ab857
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> saved certificate with serial number <span class="token number">408002549846028683500546520131538177228654950487</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> Successfully incremented state <span class="token keyword">for</span> identity appUser to <span class="token number">1</span>
<span class="token number">2021</span>/11/06 06:10:46 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token number">172.27</span>.0.1:33164 POST /api/v1/enroll <span class="token number">201</span> <span class="token number">0</span> <span class="token string">&quot;OK&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="六、查询账本" tabindex="-1"><a class="header-anchor" href="#六、查询账本" aria-hidden="true">#</a> 六、查询账本</h2><p>区块链网络中的每个节点都拥有一个<a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/ledger/ledger.html" target="_blank" rel="noopener noreferrer">账本<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的副本，应用程序可以通过执行智能合约查询账本上最新的数据来实现来<strong>查询账本</strong>，并将查询结果返回给应用程序。</p><p>这里是一个查询工作如何进行的简单说明：</p><blockquote><p>最常用的查询是查寻账本中询当前的值，也就是 <a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/ledger/ledger.html#world-state" target="_blank" rel="noopener noreferrer">世界状态<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 。世界状态是一个键值对的集合，应用程序可以根据一个键或者多个键来查询数据。而且，当键值对是以 JSON 值模式组织的时候，世界状态可以通过配置使用数据库（如 CouchDB ）来支持富查询。这对于查询所有资产来匹配特定的键的值是很有用的，比如查询一个人的所有汽车。</p></blockquote><p>首先，我们来运行我们的 <code>query.js</code> 程序来返回账本上所有汽车的侦听。这个程序使用我们的第二个身份<code>user1</code>来操作账本。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> query.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been evaluated, result is: <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR0&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;blue&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Toyota&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Prius&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tomoko&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR1&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;red&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Ford&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Mustang&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Brad&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR2&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;green&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Hyundai&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tucson&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Jin Soo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR3&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;yellow&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Volkswagen&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Passat&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Max&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR4&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;black&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tesla&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;S&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Adriana&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR5&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;purple&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Peugeot&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;205&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Michel&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR6&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;white&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Chery&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;S22L&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Aarav&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR7&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;violet&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Fiat&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Punto&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Pari&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR8&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;indigo&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tata&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Nano&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Valeria&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;Key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CAR9&quot;</span>,<span class="token string">&quot;Record&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;brown&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Holden&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Barina&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Shotaro&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment"># docker logs -f ca_org1 输出无变化</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="七、查询指定内容" tabindex="-1"><a class="header-anchor" href="#七、查询指定内容" aria-hidden="true">#</a> 七、查询指定内容</h2><p>分析源码``fabric-samples/chaincode/fabcar/javascript/lib/fabcar.js`</p><p>分析源码<code>fabric-samples/fabcar/javascript/query.js</code>，找到<code>queryCar</code>函数</p><p>修改<code>fabric-samples/fabcar/javascript/query.js</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>vim query<span class="token punctuation">.</span>js

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">evaluateTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;queryAllCars&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改为</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">evaluateTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;queryCar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行<code>query.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> query.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been evaluated, result is: <span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;black&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tesla&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;S&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Adriana&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="八、更新账本-添加数据" tabindex="-1"><a class="header-anchor" href="#八、更新账本-添加数据" aria-hidden="true">#</a> 八、更新账本-添加数据</h2><p>从一个应用程序的角度来说，更新一个账本很简单。应用程序向区块链网络提交一个交易，当交易被验证和提交后，应用程序会收到一个交易成功的提醒。但是在底层，区块链网络中各组件中不同的 <strong>共识</strong> 程序协同工作，来保证账本的每一个更新提案都是合法的，而且有一个大家一致认可的顺序。</p><p>下图中，我们可以看到完成这项工作的主要组件。同时，多个节点中每一个节点都拥有一份账本的副本，并可选的拥有一份智能合约的副本，网络中也有一个排序服务。排序服务保证网络中交易的<strong>一致性</strong>；它也将连接到网络中不同的应用程序的交易以定义好的顺序生成区块。</p><figure><img src="https://raw.githubusercontent.com/Jxpro/PicBed/master/md/2021/11/06-162955.png" alt="_images/write_first_app.diagram.2.png" tabindex="0" loading="lazy"><figcaption>_images/write_first_app.diagram.2.png</figcaption></figure><p>我们对账本的的第一个更新是<strong>创建一辆新车</strong>。我们有一个单独的程序叫做 <code>invoke.js</code> ，用来更新账本，关键代码如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">submitTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;createCar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR12&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Honda&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Accord&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Black&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li>注意 <code>inovke</code> 程序是怎样使用 <code>submitTransaction</code> API 和区块链网络交互的，而不是 <code>evaluateTransaction</code> 。</li><li><code>submitTransaction</code> 比 <code>evaluateTransaction</code> 更加复杂。除了跟一个单独的 peer 进行互动外，SDK 会将 <code>submitTransaction</code> 提案发送给在区块链网络中的每个需要的组织的 peer。其中的每个 peer 将会使用这个提案来执行被请求的智能合约，以此来产生一个建议的回复，它会为这个回复签名并将其返回给 SDK。SDK 搜集所有签过名的交易反馈到一个单独的交易中，这个交易会被发送给排序节点。排序节点从每个应用程序那里搜集并将交易排序，然后打包进一个交易的区块中。接下来它会将这些区块分发给网络中的每个 peer，在那里每笔交易会被验证并提交。最后，SDK 会被通知，这允许它能够将控制返回给应用程序。</li><li><code>submitTransaction</code> 也包含一个监听者，它会检查来确保交易被验证并提交到账本中。应用程序应该使用一个提交监听者，或者使用像 <code>submitTransaction</code> 这样的 API 来给你做这件事情。如果不做这个，你的交易就可能没有被成功地排序、验证以及提交到账本。</li><li>应用程序中的这些工作由 <code>submitTransaction</code> 完成，应用程序、智能合约、节点和排序服务一起工作来保证网络中账本一致性的程序被称为<strong>共识</strong></li></ul></blockquote><p>运行<code>invoke.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> invoke.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been submitted

<span class="token comment"># docker logs -f ca_org1 输出无变化</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改<code>query.js</code>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>vim query<span class="token punctuation">.</span>js

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">evaluateTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;queryCar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改为</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">evaluateTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;queryCar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR12&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行<code>query.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> query.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been evaluated, result is: <span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Black&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Honda&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Accord&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="九、更新账本-修改数据" tabindex="-1"><a class="header-anchor" href="#九、更新账本-修改数据" aria-hidden="true">#</a> 九、更新账本-修改数据</h2><p>分析源码``fabric-samples/chaincode/fabcar/javascript/lib/fabcar.js`</p><p>分析源码<code>fabric-samples/fabcar/javascript/invoke.js</code></p><p>修改<code>fabric-samples/fabcar/javascript/invoke.js</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>vim invoke<span class="token punctuation">.</span>js

<span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">submitTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;createCar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR12&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Honda&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Accord&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Black&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改为</span>
<span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">submitTransaction</span><span class="token punctuation">(</span><span class="token string">&#39;changeCarOwner&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CAR12&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Dave&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行<code>invoke.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> invoke.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been submitted

<span class="token comment"># docker logs -f ca_org1 输出无变化</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行<code>query.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> query.js

<span class="token comment"># 结果</span>
Wallet path: /root/go/src/github.com/hyperledger/fabric/scripts/fabric-samples/fabcar/javascript/wallet
Transaction has been evaluated, result is: <span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Black&quot;</span>,<span class="token string">&quot;docType&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;car&quot;</span>,<span class="token string">&quot;make&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Honda&quot;</span>,<span class="token string">&quot;model&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Accord&quot;</span>,<span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Dave&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十、清除数据" tabindex="-1"><a class="header-anchor" href="#十、清除数据" aria-hidden="true">#</a> 十、清除数据</h2><p>可以使用 <code>networkDown.sh</code> 脚本<strong>关闭测试网络</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>

./networkDown.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该命令将关闭我们创建的网络的CA、peer节点和排序节点。 它还将删除保存在 <code>wallet</code> 目录中的 <code>admin</code> 和 <code>appUser</code> 加密资料。 请注意，<strong>帐本上的所有数据都将丢失</strong>。 如果您想再次学习本教程，您将会以初始状态的形式启动网络。</p><h2 id="十一、参考文章" tabindex="-1"><a class="header-anchor" href="#十一、参考文章" aria-hidden="true">#</a> 十一、参考文章</h2><ul><li><a href="https://hyperledger-fabric.readthedocs.io/zh_CN/release-2.2/write_first_app.html" target="_blank" rel="noopener noreferrer">编写你的第一个应用<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a href="/Blockchain/Fabric/2.demo_test_network.html" class="nav-link prev" aria-label="测试网络"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->测试网络</div></a><a href="/Blockchain/Fabric/4.demo_paper.html" class="nav-link next" aria-label="商业票据"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">商业票据<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 Joker Xin</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-24ed71cb.js" defer></script>
  </body>
</html>
