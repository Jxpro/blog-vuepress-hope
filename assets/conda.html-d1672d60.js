import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as n,e as s}from"./app-5e6e2e94.js";const i={},d=s(`<h1 id="conda使用相关" tabindex="-1"><a class="header-anchor" href="#conda使用相关" aria-hidden="true">#</a> Conda使用相关</h1><h2 id="环境变量" tabindex="-1"><a class="header-anchor" href="#环境变量" aria-hidden="true">#</a> 环境变量</h2><p>可选配置，或者在安装执行执行<code>conda init</code>也可</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code>D:\\Anaconda3\\Scripts
D:\\Miniconda3\\condabin
D:\\Anaconda3\\Library\\bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="环境管理" tabindex="-1"><a class="header-anchor" href="#环境管理" aria-hidden="true">#</a> 环境管理</h2><p>查看环境管理的全部命令帮助</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda <span class="token function">env</span> <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://raw.githubusercontent.com/Jxpro/PicBed/master/md/new/2022-03-31-002230.png" alt="image-20220331002229281" tabindex="0" loading="lazy"><figcaption>image-20220331002229281</figcaption></figure><p>创建环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> env_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入<code>y</code>确认创建。</p><p>创建制定python版本的环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> env_name <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">2.7</span>
conda create <span class="token parameter variable">-n</span> env_name <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3</span>
conda create <span class="token parameter variable">-n</span> env_name <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建包含某些包的环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">--name</span> env_name numpy scipy1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建指定python版本下包含某些包的环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">--name</span> your_env_name <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.5</span> numpy scipy1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>列举环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda info <span class="token parameter variable">--envs</span>
conda <span class="token function">env</span> list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>进入环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda activate env_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>退出环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>codna deactivate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>复制环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> new_env_name <span class="token parameter variable">--clone</span> old_env_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>删除环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda remove <span class="token parameter variable">-n</span> env_name <span class="token parameter variable">--all</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="重置环境" tabindex="-1"><a class="header-anchor" href="#重置环境" aria-hidden="true">#</a> 重置环境</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看环境记录</span>
conda list <span class="token parameter variable">--revisions</span>

<span class="token comment"># 回到指定版本</span>
conda <span class="token function">install</span> <span class="token parameter variable">--rev</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="重命名环境" tabindex="-1"><a class="header-anchor" href="#重命名环境" aria-hidden="true">#</a> 重命名环境</h2><p>Conda是没有重命名环境的功能的, 要实现这个基本需求, 只能通过愚蠢的<strong>克隆-删除</strong>的过程</p><p>切记不要直接<code>mv</code>移动环境的文件夹来重命名, 会导致一系列无法想象的错误的发生</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>//克隆oldname环境为newname环境
conda create <span class="token parameter variable">-n</span> new_env_name <span class="token parameter variable">--clone</span> old_env_name
//彻底删除旧环境
conda remove <span class="token parameter variable">-n</span> old_env_name <span class="token parameter variable">--all</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>最好在base环境下进行以上操作，否则会出现各种莫名的问题</p></blockquote><h2 id="备份环境" tabindex="-1"><a class="header-anchor" href="#备份环境" aria-hidden="true">#</a> 备份环境</h2><p>首先通过<code>conda activate target_env</code>要备份的环境<code>target_env</code>，然后输入下面的命令会在当前工作目录下生成一个<code>environment.yml</code>文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda <span class="token function">env</span> <span class="token builtin class-name">export</span> <span class="token operator">&gt;</span> environment.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>拿到<code>environment.yml</code>文件后，将该文件放在工作目录下，可以通过以下命令即可从该文件创建环境</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda <span class="token function">env</span> create <span class="token parameter variable">-f</span> environment.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="包管理" tabindex="-1"><a class="header-anchor" href="#包管理" aria-hidden="true">#</a> 包管理</h2><p>列举当前活跃环境下的所有包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>列举一个非当前活跃环境下的所有包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda list <span class="token parameter variable">-n</span> env_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>为指定环境安装某个包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda <span class="token function">install</span> <span class="token parameter variable">-n</span> env_name package_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看指定包可安装版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda search package_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装本地包</p><blockquote><p>有时conda或pip源下载速度太慢，<code>install</code>过程中会中断连接导致压缩包下载不全，此时，我们可以用浏览器等工具先下载指定包再用conda或pip进行本地安装</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#pip 安装本地包</span>
pip <span class="token function">install</span>   ～/Downloads/a.whl
<span class="token comment">#conda 安装本地包</span>
conda <span class="token function">install</span> --use-local  ~/Downloads/a.tar.bz2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="清理瘦身" tabindex="-1"><a class="header-anchor" href="#清理瘦身" aria-hidden="true">#</a> 清理瘦身</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda clean <span class="token parameter variable">-p</span>       //删除没有用的包
conda clean <span class="token parameter variable">-t</span>       //删除tar包
conda clean <span class="token parameter variable">-y</span> <span class="token parameter variable">-a</span>    //删除所有的安装包及cache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="关闭-自动激活base" tabindex="-1"><a class="header-anchor" href="#关闭-自动激活base" aria-hidden="true">#</a> 关闭/自动激活base</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda activate   <span class="token comment">#默认激活base环境</span>
conda activate xxx  <span class="token comment">#激活xxx环境</span>
conda deactivate <span class="token comment">#关闭当前环境</span>
conda config <span class="token parameter variable">--set</span> auto_activate_base <span class="token boolean">false</span>  <span class="token comment">#关闭自动激活状态</span>
conda config <span class="token parameter variable">--set</span> auto_activate_base <span class="token boolean">true</span>  <span class="token comment">#关闭自动激活状态</span>
<span class="token number">12345</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="为所有shell初始化conda" tabindex="-1"><a class="header-anchor" href="#为所有shell初始化conda" aria-hidden="true">#</a> 为所有shell初始化conda</h2><p><code>conda</code>在<code>Windows</code>上的默认<code>shell</code>是<code>cmd</code>，而不是<code>PowerShell</code>，所以在<code>PowerShell</code>中使用一般的<code>conda</code>命令是可以 ， 但无法使用<code>activate</code>、<code>deactivate</code>切换环境</p><p>通过<code>conda init</code>命令，可以为让所有<code>shell</code>都使用全部的<code>conda</code>命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 初始化 conda</span>
conda init <span class="token punctuation">[</span>shell_name<span class="token punctuation">]</span>

<span class="token comment"># 恢复初始化</span>
conda init <span class="token parameter variable">--reverse</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://raw.githubusercontent.com/Jxpro/PicBed/master/md/new/2022-03-31-004950.png" alt="image-20220331004043480" tabindex="0" loading="lazy"><figcaption>image-20220331004043480</figcaption></figure>`,60),l=[d];function c(r,o){return e(),n("div",null,l)}const v=a(i,[["render",c],["__file","conda.html.vue"]]);export{v as default};
